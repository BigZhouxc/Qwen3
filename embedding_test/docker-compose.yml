services:
  qwen3_vl_embedding:
    image: qwenllm/qwenvl:qwen3vl-cu128
    container_name: qwen3_vl_embedding
    runtime: nvidia
    network_mode: host
    ipc: host
    restart: unless-stopped
    environment:
      CUDA_VISIBLE_DEVICES: "1"
      MODEL_PATH: "/model"
    volumes:
      - /data/modelscope/hub/models/Qwen/Qwen3-VL-Embedding-8B:/model:ro
      - /home/ubuntu/qwen_stack/embedding_service:/app
    command:
      - uvicorn
      - embedding_server:app
      - --host
      - 0.0.0.0
      - --port
      - "38042"
      - --app-dir
      - /app